#!/usr/bin/env ruby

# You should write a program that takes input as follows:
# The input will consist of an arbitrary number of fields. The first line of each field contains two integers n and m (0 < n,m <= 100) which stands for the number of lines and columns of the field respectively. The next n lines contains exactly m characters and represent the field. Each safe square is represented by an "." character (without the quotes) and each mine square is represented by an "*" character (also without the quotes). The first field line where n = m = 0 represents the end of input and should not be processed.

require_relative "../lib/grid_maker"
require_relative "../lib/player_grid"

unless ARGV.size == 1
  puts "Usage: ./bin/go pathToGrid"
  exit
end

gridFilepath = ARGV[0]

index = 0
puts GridMaker.new(gridFilepath).player_grids.reject{|grid| grid == []}.map { |grid|

  "Field ##{index+=1}:\n#{PlayerGrid.new(grid)}\n"

}.join("\n")